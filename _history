{"entries":[{"timestamp":1761497944721,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":572,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":131,"diffs":[[1," "]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":79,"length1":84,"diffs":[[1,"        \"device\": \"*\"\n"]]},{"start1":215,"length1":31,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]}]}]},{"timestamp":1761498538941,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":28,"diffs":[[1,"scene.setBackgroundColor(2)\n"]]},{"start1":29,"length1":292,"diffs":[[1,"let label = textsprite.create(\"Hello world\")\nlabel.setPosition(40, 20)\nlabel.setTextColor(15) // white"]]}]}]},{"timestamp":1761499120148,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":4519,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">2</field></shadow></value></block></statement></block><block type=\"gameupdate\" x=\"347\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"screen.print(&quot;Hello world&quot;, 10, 10, 15)\" numlines=\"1\"></mutation></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":127,"diffs":[[1,""]]},{"start1":29,"length1":169,"diffs":[[1,"let menuOptions = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\n"]]},{"start1":90,"length1":145,"diffs":[[1,"let item = sprites.create(image.create(160, 20), SpriteKind.Player)\nitem.setPosition(80, 60)\n"]]},{"start1":184,"length1":232,"diffs":[[1,"let index = 0\n"]]},{"start1":199,"length1":244,"diffs":[[1,"game.onUpdateInterval(4000, function () {\n    item.say(menuOptions[index])\n    index = (index + 1) % menuOptions.length\n"]]}]}]},{"timestamp":1761499686400,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":156,"length1":309,"diffs":[[1,"// Create a text sprite that shows \"A\" as the cursor\nlet cursor = textsprite.create(\"A\")\ncursor.setTextColor(15) // white\ncursor.setPosition(2, 20 + selectedIndex * 20)\n"]]},{"start1":650,"length1":51,"diffs":[[1,"    cursor.setPosition(2, 20 + selectedIndex * 20)\n"]]},{"start1":898,"length1":51,"diffs":[[1,"    cursor.setPosition(2, 20 + selectedIndex * 20)\n"]]}]}]},{"timestamp":1761500247839,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":286,"length1":45,"diffs":[[1,"cursorImage.print(\"A\", 1, 1, 15) // white \"A\", offset to avoid clipping\n"]]}]}]},{"timestamp":1761501266349,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":126,"length1":59,"diffs":[[1,""]]},{"start1":1062,"length1":298,"diffs":[[1,""]]}]}]},{"timestamp":1761501440793,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":11328,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</variable><variable id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Draw a small white square cursor next to the selected item\" line6=\"    screen.drawRect(2, 20 + selectedIndex * 20, 6, 6, 15)\" line7=\"})\" numlines=\"8\"></mutation></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"597\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"786\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block></xml>"]]}]}]},{"timestamp":1761503982977,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1761503983016,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":782,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</variable><variable id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</variable><variable id=\"_V]N[%+0TaTg/_?!7N13\">cursor</variable><variable id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</variable><variable id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"PDQMFV7o.d{[(~Kt2V=(\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"1hvDMQO[0jOg9LXI4105\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"Wl_1bMNT8GjdKGfh}*^w\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"28vUKXq/H-sI]xIi~SM^\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"Qd~^dfPXIf}1;W]sx+.t\">Text</variable></variables><comment x=\"0\" y=\"0\" w=\"300\" h=\"120\">\n"]]},{"start1":810,"length1":10517,"diffs":[[1,"</comment><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><comment pinned=\"false\" h=\"80\" w=\"160\">Log 0, 1, or 2</comment><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><comment pinned=\"false\" h=\"80\" w=\"160\">Confirmation sound</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reset to top</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"gamesetbackgroundcolor\"><comment pinned=\"false\" h=\"80\" w=\"160\">Internal log for selections</comment><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"})\" numlines=\"5\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":126,"length1":52,"diffs":[[1,"let eventLog: number[] = [] // Internal log for selections\n"]]},{"start1":186,"length1":85,"diffs":[[1,""]]},{"start1":640,"length1":493,"diffs":[[1,""]]},{"start1":1233,"length1":370,"diffs":[[1,"    eventLog.push(selectedIndex) // Log 0, 1, or 2\n    music.baDing.play() // Confirmation sound\n    selectedIndex = 0 // Reset to top\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1761504348866,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":263,"length1":27,"diffs":[[1,""]]},{"start1":969,"length1":178,"diffs":[[1,""]]},{"start1":1042,"length1":450,"diffs":[[1,"        // Draw bar (max width 60 pixels)\n        let barWidth = Math.idiv(remaining * 60, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, 7)\n"]]},{"start1":2061,"length1":31,"diffs":[[1,""]]},{"start1":2145,"length1":31,"diffs":[[1,""]]}]}]},{"timestamp":1761504885654,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":2779,"length1":142,"diffs":[[1,""]]}]}]},{"timestamp":1761505030296,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":16425,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</variable><variable id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</variable><variable id=\"_V]N[%+0TaTg/_?!7N13\">cursor</variable><variable id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</variable><variable id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"PDQMFV7o.d{[(~Kt2V=(\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"1hvDMQO[0jOg9LXI4105\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"Wl_1bMNT8GjdKGfh}*^w\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"28vUKXq/H-sI]xIi~SM^\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"Qd~^dfPXIf}1;W]sx+.t\">Text</variable></variables><comment x=\"0\" y=\"1545\" w=\"300\" h=\"120\">\nStart with first item selected\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"gamesetbackgroundcolor\"><comment pinned=\"false\" h=\"80\" w=\"160\">Internal log for selections</comment><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"})\" numlines=\"5\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"693\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"947\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"1209\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><comment pinned=\"false\" h=\"80\" w=\"160\">Log 0, 1, or 2</comment><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><comment pinned=\"false\" h=\"80\" w=\"160\">Confirmation sound</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reset to top</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1761521908591,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1761521908658,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":12011,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</variable><variable id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</variable><variable id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</variable><variable id=\"e=Vk.*O3n|8O1+Vh8u[J\">eventLog</variable><variable id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</variable><variable id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</variable><variable id=\"7C9iCezsc6Q3E?6X[7;E\">bathroomTimerDuration</variable><variable id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"W.VT#i=6r+r6AL9?LoVe\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"6p%3L%HW#T_?T3(hY=uD\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"aKR!rlKl^=eCQ4KO;}a/\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"GUzJht?lW*$+49rAKlW*\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"dm5@kkp^$N?XLAp9z++d\">Text</variable></variables><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"e=Vk.*O3n|8O1+Vh8u[J\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]},{"start1":6150,"length1":4362,"diffs":[[1,"    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"10\" y=\"10\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"mixer_play_sound\"><field name=\"sound\">music.pewPew</field></block></statement></block><block type=\"pxt-on-start\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7C9iCezsc6Q3E?6X[7;E\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":1707,"length1":248,"diffs":[[1,""]]},{"start1":1940,"length1":138,"diffs":[[1,"// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n"]]},{"start1":2783,"length1":172,"diffs":[[1,"// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    music.pewPew.play()\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1761522265168,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":13201,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</variable><variable id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</variable><variable id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</variable><variable id=\"e=Vk.*O3n|8O1+Vh8u[J\">eventLog</variable><variable id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</variable><variable id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</variable><variable id=\"7C9iCezsc6Q3E?6X[7;E\">bathroomTimerDuration</variable><variable id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"W.VT#i=6r+r6AL9?LoVe\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"6p%3L%HW#T_?T3(hY=uD\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"aKR!rlKl^=eCQ4KO;}a/\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"GUzJht?lW*$+49rAKlW*\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"dm5@kkp^$N?XLAp9z++d\">Text</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7C9iCezsc6Q3E?6X[7;E\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"DK+Ze;:xb34er/rM3!19\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2027\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2281\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OgA_~A3?ULi*h0zZR]j!\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2543\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"e=Vk.*O3n|8O1+Vh8u[J\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]},{"start1":12071,"length1":4362,"diffs":[[1,"    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"pBtJDPv$Gmc*STlch/{Y\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p3~M)iY9{PJ7Vtiv4TNC\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"OvX~mfwJ#[IcLKmD[5N~\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"hCht#Xe!?E.8*[~q|!gq\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3226\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"mixer_play_sound\"><field name=\"sound\">music.pewPew</field></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":1352,"diffs":[[1,"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\nlet eventLog: { type: number, time: number }[] = []\n\nlet bathroomTimerStart = -1\nlet bathroomTimerDuration = 3600000 // 60 minutes in ms\n"]]},{"start1":290,"length1":192,"diffs":[[1,"\n"]]},{"start1":319,"length1":0,"diffs":[[1,"\n"]]},{"start1":410,"length1":141,"diffs":[[1,"cursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\n"]]},{"start1":602,"length1":0,"diffs":[[1,"\n"]]},{"start1":1706,"length1":0,"diffs":[[1,"\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    music.pewPew.play()\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n\n    // Start or reset timer based on selection\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\n        alarmTriggered = false\n    } else if (selectedIndex == 2) {\n        bathroomTimerStart = -1 // reset timer\n        alarmTriggered = false\n    }\n\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n"]]},{"start1":3034,"length1":31,"diffs":[[1,"    let dummy = image.create(1, 1)\n"]]},{"start1":3097,"length1":3,"diffs":[[1,"})"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1761522747859,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1761523294004,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":263,"diffs":[[1,"// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    music.pewPew.play()\n})\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    let eventLog: number[] = []\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n    // Start or reset timer based on selection\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\nalarmTriggered = false\n    } else if (selectedIndex == 2) {\n        // reset timer\n        bathroomTimerStart = -1\n        alarmTriggered = false\n    }\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\nlet dummy: Image = null\nlet cursor: Sprite = null\nlet bathroomTimerStart = 0\nlet menuOptions: string[] = []\n"]]},{"start1":1379,"length1":1,"diffs":[[1,"// Start with first item selected\nlet selectedIndex = 0\nmenuOptions = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nbathroomTimerStart = -1\n// 60 minutes in ms\nlet bathroomTimerDuration = 3600000\n"]]},{"start1":1599,"length1":1,"diffs":[[1,""]]},{"start1":1689,"length1":145,"diffs":[[1,"// black background\ncursorImage.fill(0)\n// green \"A\"\ncursorImage.print(\"A\", 1, 1, 7)\ncursor = sprites.create(cursorImage, SpriteKind.Player)\n"]]},{"start1":1877,"length1":1,"diffs":[[1,""]]},{"start1":2980,"length1":1219,"diffs":[[1,""]]},{"start1":3089,"length1":35,"diffs":[[1,"    dummy = image.create(1, 1)\n"]]},{"start1":3148,"length1":2,"diffs":[[1,"})\n"]]}]}]},{"timestamp":1761523467900,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":13198,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</variable><variable id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</variable><variable id=\"t_0[,CS`A+{BggCM|6?i\">cursor</variable><variable id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</variable><variable id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</variable><variable id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</variable><variable id=\"94ntx:K%,un,{^J9TC/D\">dummy</variable><variable id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</variable><variable id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"!S(!Op5lQ5L+/q1{GB/g\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"^T+qxm{l!MTn[Yh},(JB\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"ZucolrH/pjcShGRE^gpv\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?y@X__)uZH89xX9@gE;w\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"+8LuF[NlGQ$nXFx?YO+M\">Text</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2027\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"582\" y=\"2027\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2281\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2543\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]}]}]},{"timestamp":1761524194187,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]}]},{"timestamp":1761524194275,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":13201,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</variable><variable id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</variable><variable id=\"t_0[,CS`A+{BggCM|6?i\">cursor</variable><variable id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</variable><variable id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</variable><variable id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</variable><variable id=\"94ntx:K%,un,{^J9TC/D\">dummy</variable><variable id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</variable><variable id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"!S(!Op5lQ5L+/q1{GB/g\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"^T+qxm{l!MTn[Yh},(JB\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"ZucolrH/pjcShGRE^gpv\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?y@X__)uZH89xX9@gE;w\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"+8LuF[NlGQ$nXFx?YO+M\">Text</variable></variables><block type=\"gameinterval\" x=\"10\" y=\"10\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2027\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2281\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2543\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":1097,"length1":54,"diffs":[[1,"            music.pewPew.play()\n"]]},{"start1":2302,"length1":65,"diffs":[[1,"    music.pewPew.play()\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]}]},{"timestamp":1761524599779,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":13234,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</variable><variable id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</variable><variable id=\"t_0[,CS`A+{BggCM|6?i\">cursor</variable><variable id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</variable><variable id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</variable><variable id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</variable><variable id=\"94ntx:K%,un,{^J9TC/D\">dummy</variable><variable id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</variable><variable id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"!S(!Op5lQ5L+/q1{GB/g\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"^T+qxm{l!MTn[Yh},(JB\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"ZucolrH/pjcShGRE^gpv\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?y@X__)uZH89xX9@gE;w\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"+8LuF[NlGQ$nXFx?YO+M\">Text</variable></variables><block type=\"pxt-on-start\" x=\"35\" y=\"55\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2027\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"582\" y=\"2027\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2281\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2543\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]},{"start1":13261,"length1":4591,"diffs":[[1,"    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3226\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"mixer_play_sound\"><field name=\"sound\">music.pewPew</field></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":603,"length1":224,"diffs":[[1,""]]},{"start1":1097,"length1":32,"diffs":[[1,"            music.playMelody(\"C5 B A G F E D C\", 120)\n"]]},{"start1":2324,"length1":24,"diffs":[[1,"    music.playMelody(\"C5 - C5 - G A G - C5 - C5 - G A G -\", 120)\n"]]}]}]},{"timestamp":1761525189240,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":681,"length1":723,"diffs":[[1,"    let start = control.millis()\n    while (control.millis() - start < 60000) {\n        music.playMelody(\"C5 C5 G A G C5 G A G C5\", 450)\n    }\n"]]}]}]},{"timestamp":1761526285296,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":703,"length1":611,"diffs":[[1,"        \"C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5\",\n"]]},{"start1":2051,"length1":142,"diffs":[[1,""]]},{"start1":3134,"length1":129,"diffs":[[1,""]]},{"start1":3645,"length1":52,"diffs":[[1,""]]}]}]},{"timestamp":1761526679162,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":291,"length1":49,"diffs":[[1,""]]},{"start1":603,"length1":32,"diffs":[[1,"// Function to play alarm sound for 60 seconds\n"]]},{"start1":681,"length1":62,"diffs":[[1,"    music.playMelody(\n        \"C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5\",\n        450\n    )\n"]]},{"start1":1335,"length1":280,"diffs":[[1,""]]},{"start1":2027,"length1":28,"diffs":[[1,"        if (alarmTriggered) {\n"]]},{"start1":3306,"length1":25,"diffs":[[1,"    music.stopMelody()\n"]]},{"start1":3844,"length1":54,"diffs":[[1,"        music.stopMelody() // also stop alarm sound\n"]]}]}]},{"timestamp":1761527238180,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":16528,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</variable><variable id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</variable><variable id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</variable><variable id=\"nBhD:r_b$:ICO}MK.@EV\">eventLog</variable><variable id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</variable><variable id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</variable><variable id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</variable><variable id=\"i2GbNmJAStz8)e!L^FK^\">bathroomTimerDuration</variable><variable id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"z9.H6V],?]{5M#D8ZWMk\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"z)Nw;Txwlp=EgRD=8eg1\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"%uQ*/5]E6I+.K!L:DZ?e\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"qh}Q80$EGUH^KgcTvR~6\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"kN]?H(#A}ti/4,5`L?=!\">Text</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"i2GbNmJAStz8)e!L^FK^\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.playMelody(&quot;C5 B A G F E D C&quot;, 120)\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"-15\" y=\"1972\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"547\" y=\"1972\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"2226\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"2488\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"nBhD:r_b$:ICO}MK.@EV\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n"]]},{"start1":13294,"length1":5473,"diffs":[[1,"    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"3171\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 C5 G A G C5 G A \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">450</field></shadow></value></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":70,"length1":22,"diffs":[[1,"let selectedIndex = 0 // Start with first item selected\n"]]},{"start1":207,"length1":84,"diffs":[[1,"let bathroomTimerDuration = 3600000 // 60 minutes in ms\n"]]},{"start1":291,"length1":50,"diffs":[[1,"let alarmPlaying = false\nlet alarmStartTime = 0\n"]]},{"start1":459,"length1":108,"diffs":[[1,"cursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\n"]]},{"start1":780,"length1":0,"diffs":[[1,"// Loop alarm melody every 1.3 seconds for up to 60 seconds\ngame.onUpdateInterval(1300, function () {\n    if (alarmPlaying && control.millis() - alarmStartTime < 60000) {\n        music.playMelody(\"C5 C5 G A G C5 G A G C5\", 450)\n    } else {\n        alarmPlaying = false\n    }\n})\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n\n    // Show countdown if active\n    if (bathroomTimerStart >= 0) {\n        let elapsed = control.millis() - bathroomTimerStart\n        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\n        let minutesLeft = Math.idiv(remaining, 60000)\n\n        // Trigger alarm once when timer hits zero\n        if (remaining == 0 && !alarmTriggered) {\n            playBathroomAlarm()\n            alarmTriggered = true\n        }\n\n        screen.print(\"Bathroom in: \" + minutesLeft + \" min\", 10, 90, 7)\n\n        // Show stop message if alarm is active\n        if (alarmPlaying) {\n            screen.print(\"→ Stop Alarm\", 10, 110, 2)\n        }\n\n        // Determine bar color based on urgency\n        let barColor = 7 // green\n        if (minutesLeft <= 20) {\n            barColor = 2 // red\n        } else if (minutesLeft <= 40) {\n            barColor = 4 // yellow\n        }\n\n        // Draw bar (scaled to full screen width)\n        let barMaxWidth = 140\n        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, barColor)\n    }\n})\n\n"]]},{"start1":3278,"length1":0,"diffs":[[1,"    // Start or reset timer based on selection\n"]]},{"start1":3491,"length1":32,"diffs":[[1,"        bathroomTimerStart = -1 // reset timer\n"]]},{"start1":3569,"length1":29,"diffs":[[1,"        alarmPlaying = false // also stop alarm sound\n"]]},{"start1":3707,"length1":1395,"diffs":[[1,""]]},{"start1":3816,"length1":31,"diffs":[[1,"    let dummy = image.create(1, 1)\n"]]}]}]},{"timestamp":1761527507373,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":1113,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</variable><variable id=\"1d}LXu0TXQ0uomI(E3~f\">alarmStartTime</variable><variable id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</variable><variable id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</variable><variable id=\"-lHgg;SWn))bXq7LaX?n\">cursor</variable><variable id=\"V!!o0)kfez8dXm_zy+Gs\">eventLog</variable><variable id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</variable><variable id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</variable><variable id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</variable><variable id=\";9@23i#DS%5H=F=#ZLVw\">bathroomTimerDuration</variable><variable id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"NdUXjLF8qy(1bpR68Hfn\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"wiw2mz18sYc{OC0Pn%Z)\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"tX[`LZ7Z[1WjgbO4A9p0\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?TaWUoRm[]n9=:VjECeD\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"hg0~6V8)oj_z*PF)mscJ\">Text</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmStartTime = 0\" numlines=\"1\" declaredvars=\"alarmStartTime\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmPlaying = false\" numlines=\"1\" declaredvars=\"alarmPlaying\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";9@23i#DS%5H=F=#ZLVw\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            playBathroomAlarm()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Show stop message if alarm is active\" line20=\"        if (alarmPlaying) {\" line21=\"            screen.print(&quot;→ Stop Alarm&quot;, 10, 110, 2)\" line22=\"        }\" line23=\"\" line24=\"        // Determine bar color based on urgency\" line25=\"        let barColor = 7 // green\" line26=\"        if (minutesLeft &lt;= 20) {\" line27=\"            barColor = 2 // red\" line28=\"        } else if (minutesLeft &lt;= 40) {\" line29=\"            barColor = 4 // yellow\" line30=\"        }\" line31=\"\" line32=\"        // Draw bar (scaled to full screen width)\" line33=\"        let barMaxWidth = 140\" line34=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line35=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line36=\"    }\" line37=\"})\" numlines=\"38\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2323\"><comment pinned=\"false\" h=\"80\" w=\"160\">Loop alarm melody every 1.3 seconds for up to 60 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">1300</field></shadow></value><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">control.millis()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1d}LXu0TXQ0uomI(E3~f\">alarmStartTime</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">60000</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 C5 G A G C5 G A \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">450</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2706\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"582\" y=\"2706\"><field name=\"button\">controller.right</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop alarm with right button</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2927\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3181\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3443\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V!!o0)kfez8dXm_zy+Gs\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n        type: selectedIndex,\n        time: control.millis()\n    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><comment pinned=\"false\" h=\"80\" w=\"160\">also stop alarm sound</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"4175\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"playBathroomAlarm\" functionid=\"$I.L5H+$`wik7!^o8rFs\"></mutation></block></statement></block><block type=\"function_definition\" x=\"343\" y=\"4175\"><mutation name=\"playBathroomAlarm\" functionid=\"$I.L5H+$`wik7!^o8rFs\"></mutation><field name=\"function_name\">playBathroomAlarm</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to start alarm loop</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"alarmStartTime = control.millis()\" numlines=\"1\"></mutation></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1761529169763,"editorVersion":"2.0.61","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":277,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1761497944720,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <variables></variables>\n  <block type=\"pxt-on-start\" x=\"0\" y=\"0\"></block>\n</xml>","main.ts":" ","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1761499808995,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</variable><variable id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Draw a small white square cursor next to the selected item\" line6=\"    screen.drawRect(2, 20 + selectedIndex * 20, 6, 6, 15)\" line7=\"})\" numlines=\"8\"></mutation></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"597\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"786\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\n\nscene.setBackgroundColor(1)\n\n// Create a text sprite that shows \"A\" as the cursor\nlet cursor = textsprite.create(\"A\")\ncursor.setColor(15) // white\ncursor.setPosition(2, 20 + selectedIndex * 20)\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(2, 20 + selectedIndex * 20)\n})\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(2, 20 + selectedIndex * 20)\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1761503982977,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</variable><variable id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Draw a small white square cursor next to the selected item\" line6=\"    screen.drawRect(2, 20 + selectedIndex * 20, 6, 6, 15)\" line7=\"})\" numlines=\"8\"></mutation></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"597\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"786\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"ld_)A7^GFG+3J,2`t:hK\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"X.Qw+5Zl/mip_B6V.PSG\">menuOptions</field></block></value></block></value></block></value></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\nlet eventLog: number[] = [] // Internal log for selections\n\nscene.setBackgroundColor(1)\n\n// Create a custom image sprite for the \"A\" cursor\nlet cursorImage = image.create(10, 10)\ncursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\ncursor.setPosition(5, 24 + selectedIndex * 20)\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push(selectedIndex) // Log 0, 1, or 2\n    music.baDing.play() // Confirmation sound\n    selectedIndex = 0 // Reset to top\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1761521908591,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</variable><variable id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</variable><variable id=\"_V]N[%+0TaTg/_?!7N13\">cursor</variable><variable id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</variable><variable id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"PDQMFV7o.d{[(~Kt2V=(\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"1hvDMQO[0jOg9LXI4105\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"Wl_1bMNT8GjdKGfh}*^w\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"28vUKXq/H-sI]xIi~SM^\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"Qd~^dfPXIf}1;W]sx+.t\">Text</variable></variables><comment x=\"0\" y=\"1545\" w=\"300\" h=\"120\">\nStart with first item selected\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"gamesetbackgroundcolor\"><comment pinned=\"false\" h=\"80\" w=\"160\">Internal log for selections</comment><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l{$=^C6`#FT:ZC},4f!g\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"})\" numlines=\"5\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"693\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"947\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"reSD,yMbh^!?F|fr}dPc\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"0\" y=\"1209\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><comment pinned=\"false\" h=\"80\" w=\"160\">Log 0, 1, or 2</comment><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"FDrxC%o}L[k1[I{u,Y71\">eventLog</field></block></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><comment pinned=\"false\" h=\"80\" w=\"160\">Confirmation sound</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field><comment pinned=\"false\" h=\"80\" w=\"160\">Reset to top</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_V]N[%+0TaTg/_?!7N13\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"rYVYo:AcKJ?T-,3tHOn+\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\nlet eventLog: { type: number, time: number }[] = []\n\nlet bathroomTimerStart = -1\nlet bathroomTimerDuration = 3600000 // 60 minutes in ms\nlet alarmTriggered = false\n\nscene.setBackgroundColor(1)\n\n// Create a custom image sprite for the \"A\" cursor\nlet cursorImage = image.create(10, 10)\ncursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\ncursor.setPosition(5, 24 + selectedIndex * 20)\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n\n    // Show countdown if active\n    if (bathroomTimerStart >= 0) {\n        let elapsed = control.millis() - bathroomTimerStart\n        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\n        let minutesLeft = Math.idiv(remaining, 60000)\n\n        // Trigger alarm once when timer hits zero\n        if (remaining == 0 && !alarmTriggered) {\n            music.pewPew.play()\n            alarmTriggered = true\n        }\n\n        screen.print(\"Bathroom in: \" + minutesLeft + \" min\", 10, 90, 7)\n\n        // Determine bar color based on urgency\n        let barColor = 7 // green\n        if (minutesLeft <= 20) {\n            barColor = 2 // red\n        } else if (minutesLeft <= 40) {\n            barColor = 4 // yellow\n        }\n\n        // Draw bar (scaled to full screen width)\n        let barMaxWidth = 140\n        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, barColor)\n    }\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n\n    // Start or reset timer based on selection\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\n        alarmTriggered = false\n    } else if (selectedIndex == 2) {\n        bathroomTimerStart = -1 // reset timer\n        alarmTriggered = false\n    }\n\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    music.pewPew.play()\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1761524194187,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</variable><variable id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</variable><variable id=\"t_0[,CS`A+{BggCM|6?i\">cursor</variable><variable id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</variable><variable id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</variable><variable id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</variable><variable id=\"94ntx:K%,un,{^J9TC/D\">dummy</variable><variable id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</variable><variable id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"!S(!Op5lQ5L+/q1{GB/g\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"^T+qxm{l!MTn[Yh},(JB\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"ZucolrH/pjcShGRE^gpv\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?y@X__)uZH89xX9@gE;w\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"+8LuF[NlGQ$nXFx?YO+M\">Text</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"303MWUd*LnIiGI$HJ@Wm\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"6hi4DAy5A0Oz.DoT5fmd\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.pewPew.play()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2027\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"94ntx:K%,un,{^J9TC/D\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"582\" y=\"2027\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2281\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"BbWbv*5QbLY!Ju2A2~}`\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2543\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V)Qc0B)F^a~9}g(Q+T-=\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n        type: selectedIndex,\n        time: control.millis()\n    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"LB}YYM9jV6~,k,?#0A`:\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"L9H]nR/x|fh.6sks3]Dg\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"t_0[,CS`A+{BggCM|6?i\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"7mK;H1i=)g-jw#gM@x;P\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3226\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"mixer_play_sound\"><field name=\"sound\">music.pewPew</field></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\nlet eventLog: { type: number, time: number }[] = []\n\nlet bathroomTimerStart = -1\nlet bathroomTimerDuration = 3600000 // 60 minutes in ms\nlet alarmTriggered = false\n\nscene.setBackgroundColor(1)\n\n// Create a custom image sprite for the \"A\" cursor\nlet cursorImage = image.create(10, 10)\ncursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\ncursor.setPosition(5, 24 + selectedIndex * 20)\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n\n    // Show countdown if active\n    if (bathroomTimerStart >= 0) {\n        let elapsed = control.millis() - bathroomTimerStart\n        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\n        let minutesLeft = Math.idiv(remaining, 60000)\n\n        // Trigger alarm once when timer hits zero\n        if (remaining == 0 && !alarmTriggered) {\n            music.pewPew.play()\n            alarmTriggered = true\n        }\n\n        screen.print(\"Bathroom in: \" + minutesLeft + \" min\", 10, 90, 7)\n\n        // Determine bar color based on urgency\n        let barColor = 7 // green\n        if (minutesLeft <= 20) {\n            barColor = 2 // red\n        } else if (minutesLeft <= 40) {\n            barColor = 4 // yellow\n        }\n\n        // Draw bar (scaled to full screen width)\n        let barMaxWidth = 140\n        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, barColor)\n    }\n})\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    music.pewPew.play()\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n\n    // Start or reset timer based on selection\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\n        alarmTriggered = false\n    } else if (selectedIndex == 2) {\n        bathroomTimerStart = -1 // reset timer\n        alarmTriggered = false\n    }\n\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Prevent device timeout by simulating activity every 30 seconds\ngame.onUpdateInterval(30000, function () {\n    let dummy = image.create(1, 1)\n    dummy.setPixel(0, 0, 1)\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1761526018048,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</variable><variable id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</variable><variable id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</variable><variable id=\"nBhD:r_b$:ICO}MK.@EV\">eventLog</variable><variable id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</variable><variable id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</variable><variable id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</variable><variable id=\"i2GbNmJAStz8)e!L^FK^\">bathroomTimerDuration</variable><variable id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"z9.H6V],?]{5M#D8ZWMk\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"z)Nw;Txwlp=EgRD=8eg1\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"%uQ*/5]E6I+.K!L:DZ?e\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"qh}Q80$EGUH^KgcTvR~6\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"kN]?H(#A}ti/4,5`L?=!\">Text</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"i2GbNmJAStz8)e!L^FK^\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"/;3nz!h$2=sRE/pqI%/N\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            music.playMelody(&quot;C5 B A G F E D C&quot;, 120)\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Determine bar color based on urgency\" line20=\"        let barColor = 7 // green\" line21=\"        if (minutesLeft &lt;= 20) {\" line22=\"            barColor = 2 // red\" line23=\"        } else if (minutesLeft &lt;= 40) {\" line24=\"            barColor = 4 // yellow\" line25=\"        }\" line26=\"\" line27=\"        // Draw bar (scaled to full screen width)\" line28=\"        let barMaxWidth = 140\" line29=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line30=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line31=\"    }\" line32=\"})\" numlines=\"33\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"-15\" y=\"1972\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"iTl1?/$sPTNR@6-4K!w[\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"547\" y=\"1972\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"2226\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"0:k#|nD0LiZ6#~i}Q;H#\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"2488\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"nBhD:r_b$:ICO}MK.@EV\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n        type: selectedIndex,\n        time: control.millis()\n    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"LgObh[DyQ6)L@B2Sf#52\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"FI*?Ao3,k36:GS_IR=dr\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"]Xw_Mg*2BhHWh}{pHryz\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SD40y{)PupXj[#k4B};v\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"-15\" y=\"3171\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 C5 G A G C5 G A \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">450</field></shadow></value></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0 // Start with first item selected\nlet eventLog: { type: number, time: number }[] = []\n\nlet bathroomTimerStart = -1\nlet bathroomTimerDuration = 3600000 // 60 minutes in ms\nlet alarmTriggered = false\n\nscene.setBackgroundColor(1)\n\n// Create a custom image sprite for the \"A\" cursor\nlet cursorImage = image.create(10, 10)\ncursorImage.fill(0) // black background\ncursorImage.print(\"A\", 1, 1, 7) // green \"A\"\nlet cursor = sprites.create(cursorImage, SpriteKind.Player)\ncursor.setPosition(5, 24 + selectedIndex * 20)\n\n// Function to play alarm sound for 60 seconds\nfunction playBathroomAlarm() {\n    music.playMelody(\n        \"C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5 C5 C5 G A G C5 G A G C5\",\n        450\n    )\n}\n\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n\n    // Show countdown if active\n    if (bathroomTimerStart >= 0) {\n        let elapsed = control.millis() - bathroomTimerStart\n        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\n        let minutesLeft = Math.idiv(remaining, 60000)\n\n        // Trigger alarm once when timer hits zero\n        if (remaining == 0 && !alarmTriggered) {\n            playBathroomAlarm()\n            alarmTriggered = true\n        }\n\n        screen.print(\"Bathroom in: \" + minutesLeft + \" min\", 10, 90, 7)\n\n        // Determine bar color based on urgency\n        let barColor = 7 // green\n        if (minutesLeft <= 20) {\n            barColor = 2 // red\n        } else if (minutesLeft <= 40) {\n            barColor = 4 // yellow\n        }\n\n        // Draw bar (scaled to full screen width)\n        let barMaxWidth = 140\n        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, barColor)\n    }\n})\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    playBathroomAlarm()\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n\n    // Start or reset timer based on selection\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\n        alarmTriggered = false\n    } else if (selectedIndex == 2) {\n        bathroomTimerStart = -1 // reset timer\n        alarmTriggered = false\n    }\n\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Prevent device timeout by simulating activity every 30 seconds\ngame.onUpdateInterval(30000, function () {\n    let dummy = image.create(1, 1)\n    dummy.setPixel(0, 0, 1)\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1761529169763,"editorVersion":"2.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</variable><variable id=\"1d}LXu0TXQ0uomI(E3~f\">alarmStartTime</variable><variable id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</variable><variable id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</variable><variable id=\"-lHgg;SWn))bXq7LaX?n\">cursor</variable><variable id=\"V!!o0)kfez8dXm_zy+Gs\">eventLog</variable><variable id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</variable><variable id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</variable><variable id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</variable><variable id=\";9@23i#DS%5H=F=#ZLVw\">bathroomTimerDuration</variable><variable id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</variable><variable type=\"KIND_SpriteKind\" id=\"NdUXjLF8qy(1bpR68Hfn\">Player</variable><variable type=\"KIND_SpriteKind\" id=\"wiw2mz18sYc{OC0Pn%Z)\">Projectile</variable><variable type=\"KIND_SpriteKind\" id=\"tX[`LZ7Z[1WjgbO4A9p0\">Food</variable><variable type=\"KIND_SpriteKind\" id=\"?TaWUoRm[]n9=:VjECeD\">Enemy</variable><variable type=\"KIND_SpriteKind\" id=\"hg0~6V8)oj_z*PF)mscJ\">Text</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmStartTime = 0\" numlines=\"1\" declaredvars=\"alarmStartTime\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmPlaying = false\" numlines=\"1\" declaredvars=\"alarmPlaying\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let alarmTriggered = false\" numlines=\"1\" declaredvars=\"alarmTriggered\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let selectedIndex = 0\" numlines=\"1\" declaredvars=\"selectedIndex\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start with first item selected</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_create_with\"><mutation items=\"3\" horizontalafter=\"3\"></mutation><value name=\"ADD0\"><shadow type=\"text\"><field name=\"TEXT\">吃 / Eat</field></shadow></value><value name=\"ADD1\"><shadow type=\"text\"><field name=\"TEXT\">喝 / Drink</field></shadow></value><value name=\"ADD2\"><shadow type=\"text\"><field name=\"TEXT\">厕所 / Bathroom</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\";9@23i#DS%5H=F=#ZLVw\">bathroomTimerDuration</field><comment pinned=\"false\" h=\"80\" w=\"160\">60 minutes in ms</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3600000</field></shadow></value><next><block type=\"gamesetbackgroundcolor\"><value name=\"color\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field><comment pinned=\"false\" h=\"80\" w=\"160\">Create a custom image sprite for the \"A\" cursor</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><next><block type=\"Image_fill\"><comment pinned=\"false\" h=\"80\" w=\"160\">black background</comment><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field></block></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"cursorImage.print(&quot;A&quot;, 1, 1, 7)\" numlines=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">green \"A\"</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"spritescreate\"><value name=\"img\"><shadow type=\"screen_image_picker\"><field name=\"img\"></field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"00X$Js6f@M,1D6fFltQ!\">cursorImage</field></block></value><value name=\"kind\"><shadow type=\"spritekind\"><field name=\"MEMBER\">Player</field></shadow></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"game.onPaint(function () {\" line1=\"    for (let i = 0; i &lt; menuOptions.length; i++) {\" line2=\"        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\" line3=\"    }\" line4=\"\" line5=\"    // Show countdown if active\" line6=\"    if (bathroomTimerStart &gt;= 0) {\" line7=\"        let elapsed = control.millis() - bathroomTimerStart\" line8=\"        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\" line9=\"        let minutesLeft = Math.idiv(remaining, 60000)\" line10=\"\" line11=\"        // Trigger alarm once when timer hits zero\" line12=\"        if (remaining == 0 &amp;&amp; !alarmTriggered) {\" line13=\"            playBathroomAlarm()\" line14=\"            alarmTriggered = true\" line15=\"        }\" line16=\"\" line17=\"        screen.print(&quot;Bathroom in: &quot; + minutesLeft + &quot; min&quot;, 10, 90, 7)\" line18=\"\" line19=\"        // Show stop message if alarm is active\" line20=\"        if (alarmPlaying) {\" line21=\"            screen.print(&quot;→ Stop Alarm&quot;, 10, 110, 2)\" line22=\"        }\" line23=\"\" line24=\"        // Determine bar color based on urgency\" line25=\"        let barColor = 7 // green\" line26=\"        if (minutesLeft &lt;= 20) {\" line27=\"            barColor = 2 // red\" line28=\"        } else if (minutesLeft &lt;= 40) {\" line29=\"            barColor = 4 // yellow\" line30=\"        }\" line31=\"\" line32=\"        // Draw bar (scaled to full screen width)\" line33=\"        let barMaxWidth = 140\" line34=\"        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\" line35=\"        screen.fillRect(10, 100, barWidth, 8, barColor)\" line36=\"    }\" line37=\"})\" numlines=\"38\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2323\"><comment pinned=\"false\" h=\"80\" w=\"160\">Loop alarm melody every 1.3 seconds for up to 60 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">1300</field></shadow></value><statement name=\"HANDLER\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">control.millis()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1d}LXu0TXQ0uomI(E3~f\">alarmStartTime</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">60000</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"playMelody\"><value name=\"melody\"><shadow type=\"melody_editor\"><field name=\"melody\">\"C5 C5 G A G C5 G A \"</field></shadow></value><value name=\"tempo\"><shadow type=\"math_number_minmax\"><mutation min=\"40\" max=\"500\" precision=\"0\"></mutation><field name=\"SLIDER\">450</field></shadow></value></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block></statement></block><block type=\"gameinterval\" x=\"20\" y=\"2706\"><comment pinned=\"false\" h=\"80\" w=\"160\">Prevent device timeout by simulating activity every 30 seconds</comment><value name=\"period\"><shadow type=\"timePicker\"><field name=\"ms\">30000</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"image_create\"><value name=\"width\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><value name=\"height\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"Image_setPixel\"><value name=\"picture\"><block type=\"variables_get\"><field name=\"VAR\" id=\"{P*2~8$r@QZN3:}UY8m/\">dummy</field></block></value><value name=\"x\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"y\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"c\"><shadow type=\"colorindexpicker\"><field name=\"index\">1</field></shadow></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"582\" y=\"2706\"><field name=\"button\">controller.right</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Stop alarm with right button</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"2927\"><field name=\"button\">controller.down</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor down when down button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3181\"><field name=\"button\">controller.up</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Move cursor up when up button is pressed</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_modulo\"><value name=\"DIVIDEND\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><value name=\"DIVISOR\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"lists_length\"><value name=\"VALUE\"><block type=\"variables_get\"><field name=\"VAR\" id=\"=r*bomG.kCb$j0-Ak6DD\">menuOptions</field></block></value></block></value></block></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"3443\"><field name=\"button\">controller.A</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Log selection when A button is pressed</comment><statement name=\"HANDLER\"><block type=\"array_push\"><value name=\"list\"><block type=\"variables_get\"><field name=\"VAR\" id=\"V!!o0)kfez8dXm_zy+Gs\">eventLog</field></block></value><value name=\"value\"><block type=\"typescript_expression\"><field name=\"EXPRESSION\">{\n        type: selectedIndex,\n        time: control.millis()\n    }</field></block></value><next><block type=\"mixer_play_sound\"><field name=\"sound\">music.baDing</field><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Start or reset timer based on selection</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bathroomTimerStart = control.millis()\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"variables_set\"><field name=\"VAR\" id=\"5j.^h2R=Ypf|g~7`P3){\">bathroomTimerStart</field><comment pinned=\"false\" h=\"80\" w=\"160\">reset timer</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">-1</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3CSfveCoy7d#GGeZvZ6l\">alarmTriggered</field><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><comment pinned=\"false\" h=\"80\" w=\"160\">also stop alarm sound</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"spritesetpos\"><value name=\"sprite\"><block type=\"variables_get\"><field name=\"VAR\" id=\"-lHgg;SWn))bXq7LaX?n\">cursor</field></block></value><value name=\"x\"><shadow type=\"positionPicker\"><field name=\"index\">5</field></shadow></value><value name=\"y\"><shadow type=\"positionPicker\"><field name=\"index\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">24</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"F=|-jv[L(QVb%@$wP=r#\">selectedIndex</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">20</field></shadow></value></block></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type=\"keyonevent\" x=\"20\" y=\"4175\"><field name=\"button\">controller.B</field><field name=\"event\">ControllerButtonEvent.Pressed</field><comment pinned=\"false\" h=\"80\" w=\"160\">Manual alarm trigger for training (B button)</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"playBathroomAlarm\" functionid=\"$I.L5H+$`wik7!^o8rFs\"></mutation></block></statement></block><block type=\"function_definition\" x=\"343\" y=\"4175\"><mutation name=\"playBathroomAlarm\" functionid=\"$I.L5H+$`wik7!^o8rFs\"></mutation><field name=\"function_name\">playBathroomAlarm</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to start alarm loop</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"8jteF$2w#GGkEktc[#`u\">alarmPlaying</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"alarmStartTime = control.millis()\" numlines=\"1\"></mutation></block></next></block></statement></block></xml>","main.ts":"let menuOptions: string[] = [\"吃 / Eat\", \"喝 / Drink\", \"厕所 / Bathroom\"]\nlet selectedIndex = 0\nlet eventLog: { type: number, time: number }[] = []\n\nlet bathroomTimerStart = -1\nlet bathroomTimerDuration = 3600000\nlet alarmStartTime = 0\nlet alarmPlaying = false\nlet alarmTriggered = false\n\nlet dummy: Image = null\nlet cursor: Sprite = null\n\nscene.setBackgroundColor(1)\n\n// Create a custom image sprite for the \"A\" cursor\nlet cursorImage = image.create(10, 10)\ncursorImage.fill(0)\ncursorImage.print(\"A\", 1, 1, 7)\ncursor = sprites.create(cursorImage, SpriteKind.Player)\ncursor.setPosition(5, 24 + selectedIndex * 20)\n\n// Function to start alarm loop\nfunction playBathroomAlarm() {\n    alarmPlaying = true\n    alarmStartTime = control.millis()\n}\n\n// Move cursor up when up button is pressed\ncontroller.up.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex - 1 + menuOptions.length) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Move cursor down when down button is pressed\ncontroller.down.onEvent(ControllerButtonEvent.Pressed, function () {\n    selectedIndex = (selectedIndex + 1) % menuOptions.length\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Manual alarm trigger for training (B button)\ncontroller.B.onEvent(ControllerButtonEvent.Pressed, function () {\n    playBathroomAlarm()\n})\n\n// Stop alarm with right button\ncontroller.right.onEvent(ControllerButtonEvent.Pressed, function () {\n    alarmPlaying = false\n})\n\n// Log selection when A button is pressed\ncontroller.A.onEvent(ControllerButtonEvent.Pressed, function () {\n    eventLog.push({\n        type: selectedIndex,\n        time: control.millis()\n    })\n    music.baDing.play()\n\n    if (selectedIndex == 0 || selectedIndex == 1) {\n        bathroomTimerStart = control.millis()\n        alarmTriggered = false\n    } else if (selectedIndex == 2) {\n        bathroomTimerStart = -1\n        alarmTriggered = false\n        alarmPlaying = false\n    }\n\n    selectedIndex = 0\n    cursor.setPosition(5, 24 + selectedIndex * 20)\n})\n\n// Paint screen\ngame.onPaint(function () {\n    for (let i = 0; i < menuOptions.length; i++) {\n        screen.print(menuOptions[i], 10, 20 + i * 20, 15)\n    }\n\n    // Show \"→ Stop Alarm\" just below the menu if alarm is active\n    if (alarmPlaying) {\n        screen.print(\"→ Stop Alarm\", 10, 20 + menuOptions.length * 20 + 2, 2)\n    }\n\n    // Show countdown if active\n    if (bathroomTimerStart >= 0) {\n        let elapsed = control.millis() - bathroomTimerStart\n        let remaining = Math.max(0, bathroomTimerDuration - elapsed)\n        let minutesLeft = Math.idiv(remaining, 60000)\n\n        if (remaining == 0 && !alarmTriggered) {\n            playBathroomAlarm()\n            alarmTriggered = true\n        }\n\n        screen.print(\"Bathroom in: \" + minutesLeft + \" min\", 10, 90, 7)\n\n        let barColor = 7\n        if (minutesLeft <= 20) {\n            barColor = 2\n        } else if (minutesLeft <= 40) {\n            barColor = 4\n        }\n\n        let barMaxWidth = 140\n        let barWidth = Math.idiv(remaining * barMaxWidth, bathroomTimerDuration)\n        screen.fillRect(10, 100, barWidth, 8, barColor)\n    }\n})\n\n// Loop alarm melody every 1.3 seconds for up to 60 seconds\ngame.onUpdateInterval(1300, function () {\n    if (alarmPlaying && control.millis() - alarmStartTime < 60000) {\n        music.playMelody(\"C5 C5 G A G C5 G A\", 450)\n    } else {\n        alarmPlaying = false\n    }\n})\n\n// Prevent device timeout by simulating activity every 30 seconds\ngame.onUpdateInterval(30000, function () {\n    dummy = image.create(1, 1)\n    dummy.setPixel(0, 0, 1)\n})","README.md":" ","assets.json":"","pxt.json":"{\n    \"name\": \"Bathroom Trainer\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"device\": \"*\",\n        \"arcade-text\": \"github:microsoft/arcade-text#v1.3.0\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"assets.json\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1761529169774}